<!doctype html>
<html lang="bn">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shaon BD Shop - ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶™‡¶ø‡¶Ç</title>
  <script src="https://cdn.tailwindcss.com"></script><!-- Firebase SDK -->
  <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // Firebase Configuration - ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶ú‡ßá‡¶ï‡ßç‡¶ü
        const firebaseConfig = {
            apiKey: "AIzaSyBfZEFXs-99UOo43rox7o3CHDFBJE8lUSk",
            authDomain: "ew-e-ec587.firebaseapp.com",
            databaseURL: "https://ew-e-ec587-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "ew-e-ec587",
            storageBucket: "ew-e-ec587.firebasestorage.app",
            messagingSenderId: "693473236742",
            appId: "1:693473236742:web:0eeac7748b509f0f29f087",
            measurementId: "G-S89V5CJYR0"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.db = db;
        window.firestore = { collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot };
    </script>
  <style>
        body {
            box-sizing: border-box;
            font-family: 'Noto Sans Bengali', Arial, sans-serif;
        }
        html, body {
            height: 100%;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e40af 0%, #7c3aed 50%, #db2777 50%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }
        .btn-success {
            background: linear-gradient(45deg, #10b981, #059669);
        }
        .btn-danger {
            background: linear-gradient(45deg, #ef4444, #dc2626);
        }
        .btn-warning {
            background: linear-gradient(45deg, #f59e0b, #d97706);
        }
        .btn-bkash {
            background: linear-gradient(45deg, #e91e63, #c2185b);
        }
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        .toast.success {
            background: #10b981;
        }
        .toast.error {
            background: #ef4444;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .order-modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 50%, #dbeafe 100%);
            border: 2px solid #3b82f6;
        }
        .cart-item {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border: 1px solid #cbd5e1;
        }
        .cart-badge {
            background: #ef4444;
            color: white;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        .image-preview {
            max-width: 200px;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
        .product-card {
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .stats-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            color: white;
        }
        .login-form {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .bkash-logo {
            background: #e91e63;
            color: white;
            font-weight: bold;
        }
        .image-slider {
            position: relative;
            width: 100%;
            overflow: hidden;
            border-radius: 8px;
        }
        .slider-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: none;
            border-radius: 8px;
        }
        .slider-image.active {
            display: block;
        }
        .slider-controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            background: rgba(0,0,0,0.5);
            padding: 8px;
            border-radius: 20px;
        }
        .slider-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .slider-dot.active {
            background: white;
            transform: scale(1.2);
        }
        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .slider-nav:hover {
            background: rgba(0,0,0,0.7);
        }
        .slider-prev {
            left: 10px;
        }
        .slider-next {
            right: 10px;
        }
        .size-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 8px 0;
        }
        .size-option {
            padding: 6px 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            background: rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }
        .size-option:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
        }
        .size-option.selected {
            background: #3b82f6;
            border-color: #1d4ed8;
            color: white;
        }
        .image-input-group {
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 16px;
            margin: 8px 0;
        }
        .image-url-input {
            width: 100%;
            padding: 8px 12px;
            margin: 4px 0;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 6px;
            color: white;
            font-size: 14px;
        }
        .image-url-input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        .size-input-group {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 16px;
            margin: 8px 0;
        }
        .size-input {
            width: 60px;
            padding: 6px 8px;
            margin: 2px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 4px;
            color: white;
            text-align: center;
            font-size: 12px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full"><!-- Customer Shopping Site -->
  <div id="customer-site" class="min-h-full"><!-- Header -->
   <header class="gradient-bg">
    <div class="max-w-7xl mx-auto px-4 py-6">
     <div class="flex items-center justify-between">
      <div>
       <h1 id="shop-title-customer" class="text-3xl font-bold text-white">Shaon BD Shop</h1>
       <p class="text-white/80">‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶™‡¶ø‡¶Ç</p>
      </div>
      <div class="flex items-center gap-4">
       <div class="text-right text-white">
        <p class="text-sm">üìû ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</p>
        <p class="font-semibold" id="bkash-display">01881385068</p>
       </div><button onclick="showCart()" class="relative bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg font-semibold transition-all"> üõí ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü <span id="cart-badge" class="cart-badge absolute -top-2 -right-2" style="display: none;">0</span> </button> <button onclick="showAdminLogin()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg font-semibold transition-all"> ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶® </button>
      </div>
     </div>
    </div>
   </header><!-- Product Categories -->
   <section class="py-8 px-4 gradient-bg">
    <div class="max-w-7xl mx-auto">
     <div class="flex justify-center gap-4 mb-8"><button onclick="filterProducts('all')" id="filter-all" class="filter-btn bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg font-semibold transition-all"> ‡¶∏‡¶¨ ‡¶™‡¶£‡ßç‡¶Ø </button> <button onclick="filterProducts('‡¶™‡ßã‡¶∂‡¶æ‡¶ï')" id="filter-‡¶™‡ßã‡¶∂‡¶æ‡¶ï" class="filter-btn bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg font-semibold transition-all"> ‡¶™‡ßã‡¶∂‡¶æ‡¶ï </button> <button onclick="filterProducts('‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏')" id="filter-‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏" class="filter-btn bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg font-semibold transition-all"> ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏ </button>
     </div><!-- Products Grid -->
     <div id="products-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <div class="col-span-full text-center text-white/70 py-12">
       <p class="text-xl">‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
      </div>
     </div>
    </div>
   </section>
  </div><!-- Admin Login Modal -->
  <div id="admin-login-modal" class="modal">
   <div class="login-form rounded-xl p-8 max-w-md w-full mx-4">
    <h3 class="text-2xl font-bold text-white mb-6 text-center">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶≤‡¶ó‡¶á‡¶®</h3>
    <form id="admin-login-form">
     <div class="mb-6"><label class="block text-white font-semibold mb-2">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°</label> <input type="password" id="admin-password" required class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
     </div>
     <div class="flex gap-4"><button type="submit" class="btn-primary text-white py-3 px-6 rounded-lg font-semibold flex-1"> ‡¶≤‡¶ó‡¶á‡¶® </button> <button type="button" onclick="closeAdminLogin()" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold"> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ </button>
     </div>
    </form>
   </div>
  </div><!-- Cart Modal -->
  <div id="cart-modal" class="modal">
   <div class="order-modal-content rounded-xl p-6 max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <div class="flex items-center justify-between mb-6">
     <h3 class="text-2xl font-bold text-blue-800">üõí ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü</h3><button onclick="closeCart()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
    </div>
    <div id="cart-items" class="space-y-4 mb-6">
     <div class="text-center text-gray-500 py-8">
      <p>‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø</p>
     </div>
    </div>
    <div id="cart-summary" class="bg-blue-50 rounded-lg p-4 mb-6" style="display: none;">
     <div class="flex justify-between items-center mb-2"><span class="text-gray-700">‡¶∏‡¶æ‡¶¨‡¶ü‡ßã‡¶ü‡¶æ‡¶≤:</span> <span id="cart-subtotal" class="font-semibold text-gray-800">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span>
     </div>
     <div class="flex justify-between items-center mb-2"><span class="text-gray-700">‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú:</span> <span id="cart-delivery" class="font-semibold text-gray-800">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span>
     </div>
     <hr class="my-2">
     <div class="flex justify-between items-center text-lg font-bold"><span class="text-blue-800">‡¶Æ‡ßã‡¶ü:</span> <span id="cart-total" class="text-blue-800">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span>
     </div>
    </div>
    <div id="cart-actions" class="flex gap-4" style="display: none;"><button onclick="clearCart()" class="bg-red-500 hover:bg-red-600 text-white py-3 px-6 rounded-lg font-semibold"> ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶® </button> <button onclick="proceedToCheckout()" class="btn-primary text-white py-3 px-6 rounded-lg font-semibold flex-1"> ‡¶ö‡ßá‡¶ï‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® </button>
    </div>
   </div>
  </div><!-- Order Modal -->
  <div id="order-modal" class="modal">
   <div class="order-modal-content rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <h3 class="text-2xl font-bold text-gray-800 mb-6">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
    <div id="order-product-info" class="bg-gray-50 rounded-lg p-4 mb-6"><!-- Product info will be inserted here -->
    </div>
    <form id="order-form"><input type="hidden" id="order-product-id">
     <div class="grid md:grid-cols-2 gap-4 mb-4">
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ *</label> <input type="text" id="customer-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ *</label> <input type="tel" id="customer-phone" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
     </div>
     <div class="mb-4"><label class="block text-gray-700 font-semibold mb-2">‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ *</label> <textarea id="customer-address" required rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
     </div><!-- Size Selection (for clothing items) -->
     <div id="size-selection" class="mb-4" style="display: none;"><label class="block text-gray-700 font-semibold mb-2">‡¶∏‡¶æ‡¶á‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® *</label>
      <div id="size-options" class="size-selector"><!-- Size options will be inserted here -->
      </div><input type="hidden" id="selected-size">
     </div>
     <div class="mb-6"><label class="block text-gray-700 font-semibold mb-2">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ *</label> <input type="number" id="order-quantity" min="1" value="1" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <div class="mb-6"><label class="block text-gray-700 font-semibold mb-2">‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® *</label> <select id="delivery-area" required onchange="updateDeliveryCharge()" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option> <option value="dhaka">‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá (‡ß≠‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)</option> <option value="outside">‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶π‡¶ø‡¶∞‡ßá (‡ßß‡ß®‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ)</option> </select>
     </div>
     <div class="mb-6"><label class="block text-gray-700 font-semibold mb-2">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø *</label>
      <div class="space-y-3"><label class="flex items-center"> <input type="radio" name="payment-method" value="bkash" checked onchange="togglePaymentSection()" class="mr-3"> <span class="bkash-logo px-3 py-1 rounded text-sm mr-2">bKash</span> <span class="text-gray-700">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü</span> </label> <label class="flex items-center"> <input type="radio" name="payment-method" value="cod" onchange="togglePaymentSection()" class="mr-3"> <span class="bg-green-500 text-white px-3 py-1 rounded text-sm mr-2">COD</span> <span class="text-gray-700">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</span> </label>
      </div>
     </div><!-- bKash Payment Section -->
     <div id="bkash-payment-section" class="bg-pink-50 rounded-lg p-6 mb-6">
      <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="bkash-logo px-3 py-1 rounded text-sm">bKash</span> ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
      <div class="bg-white rounded-lg p-4 mb-4">
       <p class="text-gray-700 mb-2"><strong>‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞:</strong> <span id="bkash-number-display">01881385068</span></p>
       <p class="text-gray-700 mb-2"><strong>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™:</strong> Send Money</p>
       <p class="text-gray-700 mb-2"><strong>‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ:</strong> <span id="product-amount-display">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <p class="text-gray-700 mb-2"><strong>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú:</strong> <span id="delivery-charge-display">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <p class="text-gray-700 mb-4"><strong>‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ:</strong> <span id="total-amount-display">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <div class="bg-yellow-100 border-l-4 border-yellow-500 p-4 mb-4">
        <p class="text-yellow-800 text-sm"><strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞‡ßá Send Money ‡¶ï‡¶∞‡ßá Transaction ID ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡¶ø‡¶®</p>
       </div>
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">bKash Transaction ID *</label> <input type="text" id="transaction-id" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: 9A1B2C3D4E" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent">
       <p class="text-gray-600 text-sm mt-1">Send Money ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ø‡ßá Transaction ID ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶∏‡ßá‡¶ü‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</p>
      </div>
     </div><!-- Cash on Delivery Section -->
     <div id="cod-payment-section" class="bg-green-50 rounded-lg p-6 mb-6" style="display: none;">
      <h4 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><span class="bg-green-500 text-white px-3 py-1 rounded text-sm">COD</span> ‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</h4>
      <div class="bg-white rounded-lg p-4 mb-4">
       <p class="text-gray-700 mb-2"><strong>‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ:</strong> <span id="cod-product-amount">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <p class="text-gray-700 mb-2"><strong>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú:</strong> <span id="cod-delivery-charge">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <p class="text-gray-700 mb-4"><strong>‡¶Æ‡ßã‡¶ü ‡¶ü‡¶æ‡¶ï‡¶æ:</strong> <span id="cod-total-amount">‡ß¶</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
       <div class="bg-blue-100 border-l-4 border-blue-500 p-4">
        <p class="text-blue-800 text-sm"><strong>‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶®‡¶æ:</strong> ‡¶™‡¶£‡ßç‡¶Ø ‡¶π‡¶æ‡¶§‡ßá ‡¶™‡ßá‡¶Ø‡¶º‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶∞‡¶ø‡¶∂‡ßã‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶ï‡ßã‡¶® ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ø‡¶Æ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶® ‡¶®‡ßá‡¶á‡•§</p>
       </div>
      </div>
     </div>
     <div class="flex gap-4"><button type="submit" class="btn-bkash text-white py-3 px-6 rounded-lg font-semibold flex-1"> ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶ï‡¶∞‡ßÅ‡¶® </button> <button type="button" onclick="closeOrderModal()" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold"> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ </button>
     </div>
    </form>
   </div>
  </div><!-- Admin Panel -->
  <div id="admin-panel" class="min-h-full gradient-bg" style="display: none;"><!-- Admin Header -->
   <header class="bg-white/10 backdrop-blur-sm border-b border-white/20">
    <div class="max-w-7xl mx-auto px-4 py-4">
     <div class="flex items-center justify-between">
      <div>
       <h1 id="shop-title-admin" class="text-2xl font-bold text-white">Shaon BD Shop</h1>
       <p class="text-white/80">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</p>
      </div>
      <div class="flex items-center gap-4">
       <div class="text-right">
        <p id="admin-name-display" class="text-white font-semibold">‡¶è‡¶°‡¶Æ‡¶ø‡¶®: Shaon</p>
        <p class="text-white/80 text-sm" id="current-time"></p>
       </div><button onclick="logoutAdmin()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition-all"> ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü </button>
      </div>
     </div>
    </div>
   </header><!-- Stats Dashboard -->
   <section class="py-8 px-4">
    <div class="max-w-7xl mx-auto">
     <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <div class="stats-card rounded-xl p-6 text-center">
       <div class="text-3xl font-bold text-white mb-2" id="total-products">
        0
       </div>
       <div class="text-white/80">
        ‡¶Æ‡ßã‡¶ü ‡¶™‡¶£‡ßç‡¶Ø
       </div>
      </div>
      <div class="stats-card rounded-xl p-6 text-center">
       <div class="text-3xl font-bold text-white mb-2" id="total-orders">
        0
       </div>
       <div class="text-white/80">
        ‡¶Æ‡ßã‡¶ü ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞
       </div>
      </div>
      <div class="stats-card rounded-xl p-6 text-center">
       <div class="text-3xl font-bold text-white mb-2" id="pending-orders">
        0
       </div>
       <div class="text-white/80">
        ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞
       </div>
      </div>
      <div class="stats-card rounded-xl p-6 text-center">
       <div class="text-3xl font-bold text-white mb-2" id="total-revenue">
        ‡ß¶
       </div>
       <div class="text-white/80">
        ‡¶Æ‡ßã‡¶ü ‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡¶Ø‡¶º (‡¶ü‡¶æ‡¶ï‡¶æ)
       </div>
      </div>
     </div>
    </div>
   </section><!-- Admin Tab Navigation -->
   <section class="px-4">
    <div class="max-w-7xl mx-auto">
     <div class="flex space-x-1 bg-white/10 backdrop-blur-sm rounded-lg p-1"><button onclick="switchAdminTab('products')" id="admin-products-tab" class="tab-button active flex-1 py-3 px-6 rounded-md font-semibold transition-all"> ‡¶™‡¶£‡ßç‡¶Ø ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü </button> <button onclick="switchAdminTab('orders')" id="admin-orders-tab" class="tab-button flex-1 py-3 px-6 rounded-md font-semibold text-white/80 hover:text-white transition-all"> ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü </button>
     </div>
    </div>
   </section><!-- Admin Products Management -->
   <section id="admin-products-content" class="py-8 px-4">
    <div class="max-w-7xl mx-auto"><!-- Add Product Form -->
     <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 mb-8">
      <h3 class="text-xl font-bold text-white mb-6">‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
      <form id="product-form" class="space-y-6">
       <div class="grid md:grid-cols-2 gap-6">
        <div><label class="block text-white font-semibold mb-2">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *</label> <input type="text" id="product-name" required class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent">
        </div>
        <div><label class="block text-white font-semibold mb-2">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø *</label> <select id="product-category" required onchange="toggleSizeSection()" class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent"> <option value="">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option> <option value="‡¶™‡ßã‡¶∂‡¶æ‡¶ï">‡¶™‡ßã‡¶∂‡¶æ‡¶ï</option> <option value="‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏">‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏</option> </select>
        </div>
        <div><label class="block text-white font-semibold mb-2">‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ) *</label> <input type="number" id="product-price" min="1" required class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent">
        </div>
        <div><label class="block text-white font-semibold mb-2">‡¶õ‡¶æ‡¶°‡¶º (%)</label> <input type="number" id="product-discount" min="0" max="100" value="10" class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent">
        </div>
        <div><label class="block text-white font-semibold mb-2">‡¶∏‡ßç‡¶ü‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label> <input type="number" id="product-stock" min="0" value="10" class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent">
        </div>
       </div><!-- Size Section (for clothing) -->
       <div id="size-section" class="size-input-group" style="display: none;"><label class="block text-white font-semibold mb-3">‡¶∏‡¶æ‡¶á‡¶ú ‡¶∏‡¶Æ‡ßÇ‡¶π (‡¶™‡ßã‡¶∂‡¶æ‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)</label>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
         <div><label class="block text-white/80 text-sm mb-1">S ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-s" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
         <div><label class="block text-white/80 text-sm mb-1">M ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-m" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
         <div><label class="block text-white/80 text-sm mb-1">L ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-l" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
         <div><label class="block text-white/80 text-sm mb-1">XL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-xl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
         <div><label class="block text-white/80 text-sm mb-1">XXL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-xxl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
         <div><label class="block text-white/80 text-sm mb-1">XXXL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="size-xxxl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="size-input">
         </div>
        </div>
        <p class="text-white/60 text-sm mt-2">‡¶Ø‡ßá ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶õ‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßá‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶∏‡ßç‡¶ü‡¶ï ‡¶¶‡¶ø‡¶®</p>
       </div><!-- Multiple Images Section -->
       <div class="image-input-group"><label class="block text-white font-semibold mb-3">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶Æ‡ßÇ‡¶π (‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß´‡¶ü‡¶ø)</label>
        <div id="image-inputs"><input type="url" class="image-url-input" placeholder="‡¶õ‡¶¨‡¶ø ‡ßß ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶õ‡¶¨‡¶ø)" data-index="0"> <input type="url" class="image-url-input" placeholder="‡¶õ‡¶¨‡¶ø ‡ß® ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="1"> <input type="url" class="image-url-input" placeholder="‡¶õ‡¶¨‡¶ø ‡ß© ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="2"> <input type="url" class="image-url-input" placeholder="‡¶õ‡¶¨‡¶ø ‡ß™ ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="3"> <input type="url" class="image-url-input" placeholder="‡¶õ‡¶¨‡¶ø ‡ß´ ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="4">
        </div>
        <p class="text-white/60 text-sm mt-2">PostImg, ImgBB ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶á‡¶Æ‡ßá‡¶ú ‡¶π‡ßã‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶®</p>
       </div>
       <div><label class="block text-white font-semibold mb-2">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label> <textarea id="product-description" rows="3" class="w-full px-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/60 focus:ring-2 focus:ring-blue-400 focus:border-transparent"></textarea>
       </div>
       <div class="flex gap-4"><button type="submit" id="add-product-btn" class="btn-primary text-white py-3 px-8 rounded-lg font-semibold flex-1"> ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® </button> <button type="button" onclick="addAnotherProduct()" class="btn-success text-white py-3 px-8 rounded-lg font-semibold"> ‡¶Ü‡¶∞‡ßá‡¶ï‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® </button>
       </div>
      </form>
     </div><!-- Products List -->
     <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
      <h3 class="text-xl font-bold text-white mb-6">‡¶™‡¶£‡ßç‡¶Ø ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
      <div id="admin-products-list" class="space-y-4">
       <div class="text-center text-white/70 py-8">
        <p>‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Admin Orders Management -->
   <section id="admin-orders-content" class="py-8 px-4" style="display: none;">
    <div class="max-w-7xl mx-auto">
     <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
      <h3 class="text-xl font-bold text-white mb-6">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>
      <div id="admin-orders-list" class="space-y-4">
       <div class="text-center text-white/70 py-8">
        <p>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
       </div>
      </div>
     </div>
    </div>
   </section>
  </div><!-- Edit Product Modal -->
  <div id="edit-product-modal" class="modal">
   <div class="order-modal-content rounded-xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
    <div class="flex items-center justify-between mb-6">
     <h3 class="text-2xl font-bold text-blue-800">‡¶™‡¶£‡ßç‡¶Ø ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</h3><button onclick="closeEditProduct()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
    </div>
    <form id="edit-product-form" class="space-y-6"><input type="hidden" id="edit-product-id">
     <div class="grid md:grid-cols-2 gap-6">
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *</label> <input type="text" id="edit-product-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø *</label> <select id="edit-product-category" required onchange="toggleEditSizeSection()" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option> <option value="‡¶™‡ßã‡¶∂‡¶æ‡¶ï">‡¶™‡ßã‡¶∂‡¶æ‡¶ï</option> <option value="‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏">‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®‡¶ø‡¶ï‡ßç‡¶∏</option> </select>
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶¶‡¶æ‡¶Æ (‡¶ü‡¶æ‡¶ï‡¶æ) *</label> <input type="number" id="edit-product-price" min="1" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶õ‡¶æ‡¶°‡¶º (%)</label> <input type="number" id="edit-product-discount" min="0" max="100" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div><label class="block text-gray-700 font-semibold mb-2">‡¶∏‡ßç‡¶ü‡¶ï ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</label> <input type="number" id="edit-product-stock" min="0" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
     </div><!-- Size Section (for clothing) -->
     <div id="edit-size-section" class="bg-gray-50 rounded-lg p-4" style="display: none;"><label class="block text-gray-700 font-semibold mb-3">‡¶∏‡¶æ‡¶á‡¶ú ‡¶∏‡¶Æ‡ßÇ‡¶π (‡¶™‡ßã‡¶∂‡¶æ‡¶ï‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)</label>
      <div class="grid grid-cols-2 md:grid-cols-6 gap-4">
       <div><label class="block text-gray-600 text-sm mb-1">S ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-s" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
       <div><label class="block text-gray-600 text-sm mb-1">M ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-m" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
       <div><label class="block text-gray-600 text-sm mb-1">L ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-l" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
       <div><label class="block text-gray-600 text-sm mb-1">XL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-xl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
       <div><label class="block text-gray-600 text-sm mb-1">XXL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-xxl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
       <div><label class="block text-gray-600 text-sm mb-1">XXXL ‡¶∏‡¶æ‡¶á‡¶ú</label> <input type="number" id="edit-size-xxxl" min="0" placeholder="‡¶∏‡ßç‡¶ü‡¶ï" class="w-full px-3 py-2 border border-gray-300 rounded text-center">
       </div>
      </div>
      <p class="text-gray-600 text-sm mt-2">‡¶Ø‡ßá ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ü‡¶õ‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶∏‡ßá‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶∏‡ßç‡¶ü‡¶ï ‡¶¶‡¶ø‡¶®</p>
     </div><!-- Multiple Images Section -->
     <div class="bg-gray-50 rounded-lg p-4"><label class="block text-gray-700 font-semibold mb-3">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶∏‡¶Æ‡ßÇ‡¶π (‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß´‡¶ü‡¶ø)</label>
      <div id="edit-image-inputs"><input type="url" class="edit-image-url-input w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg" placeholder="‡¶õ‡¶¨‡¶ø ‡ßß ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶™‡ßç‡¶∞‡¶ß‡¶æ‡¶® ‡¶õ‡¶¨‡¶ø)" data-index="0"> <input type="url" class="edit-image-url-input w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg" placeholder="‡¶õ‡¶¨‡¶ø ‡ß® ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="1"> <input type="url" class="edit-image-url-input w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg" placeholder="‡¶õ‡¶¨‡¶ø ‡ß© ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="2"> <input type="url" class="edit-image-url-input w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg" placeholder="‡¶õ‡¶¨‡¶ø ‡ß™ ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="3"> <input type="url" class="edit-image-url-input w-full px-4 py-2 mb-2 border border-gray-300 rounded-lg" placeholder="‡¶õ‡¶¨‡¶ø ‡ß´ ‡¶è‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï)" data-index="4">
      </div>
      <p class="text-gray-600 text-sm mt-2">PostImg, ImgBB ‡¶¨‡¶æ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶® ‡¶á‡¶Æ‡ßá‡¶ú ‡¶π‡ßã‡¶∏‡ßç‡¶ü‡¶ø‡¶Ç ‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶ø‡¶®</p>
     </div>
     <div><label class="block text-gray-700 font-semibold mb-2">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</label> <textarea id="edit-product-description" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
     </div>
     <div class="flex gap-4"><button type="submit" id="update-product-btn" class="btn-primary text-white py-3 px-8 rounded-lg font-semibold flex-1"> ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® </button> <button type="button" onclick="closeEditProduct()" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-8 rounded-lg font-semibold"> ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ </button>
     </div>
    </form>
   </div>
  </div><!-- Invoice Modal -->
  <div id="invoice-modal" class="modal">
   <div class="bg-white rounded-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto" style="box-shadow: 0 25px 50px rgba(0,0,0,0.25);"><!-- Invoice Header -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-t-xl">
     <div class="flex justify-between items-center">
      <div>
       <h2 class="text-2xl font-bold">‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏</h2>
       <p class="text-blue-100">Shaon BD Shop</p>
      </div><button onclick="closeInvoice()" class="text-white hover:text-gray-200 text-2xl">√ó</button>
     </div>
    </div><!-- Invoice Content -->
    <div id="invoice-content" class="p-6"><!-- Invoice content will be inserted here -->
    </div><!-- Invoice Actions -->
    <div class="bg-gray-50 px-6 py-4 rounded-b-xl flex gap-4"><button onclick="printInvoice()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold flex-1"> üñ®Ô∏è ‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® </button> <button onclick="shareInvoice()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold flex-1"> üì§ ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® </button>
    </div>
   </div>
  </div><!-- Toast Notification -->
  <div id="toast" class="toast"></div>
  <script>
        // Configuration
        const ADMIN_PASSWORD = "sawon772@";
        let currentProducts = [];
        let currentOrders = [];
        let currentTab = 'products';
        let currentFilter = 'all';
        let isAdminLoggedIn = false;
        let cart = [];
        let deliveryCharge = 0;
        let imageSliders = {};

        // Firebase Functions
        async function loadProducts() {
            try {
                console.log('Loading products...');
                if (!window.db || !window.firestore) {
                    console.log('Firebase not ready yet, retrying...');
                    setTimeout(loadProducts, 1000);
                    return;
                }
                
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'products'));
                currentProducts = [];
                querySnapshot.forEach((doc) => {
                    currentProducts.push({ id: doc.id, ...doc.data() });
                });
                
                console.log('Successfully loaded products:', currentProducts.length);
                
                // Always render customer products
                renderCustomerProducts(currentProducts);
                
                // Render admin products if logged in
                if (isAdminLoggedIn) {
                    renderAdminProducts(currentProducts);
                }
                
                updateStats();
                
            } catch (error) {
                console.error('Error loading products:', error);
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶õ‡¶ø...', 'error');
                // Retry after 3 seconds
                setTimeout(loadProducts, 3000);
            }
        }

        async function loadOrders() {
            try {
                console.log('Loading orders...');
                if (!window.db || !window.firestore) {
                    console.log('Firebase not ready yet for orders, retrying...');
                    setTimeout(loadOrders, 1000);
                    return;
                }
                
                // Show loading message first
                const ordersContainer = document.getElementById('admin-orders-list');
                if (ordersContainer && isAdminLoggedIn) {
                    ordersContainer.innerHTML = `
                        <div class="text-center text-white/70 py-8">
                            <p>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                        </div>
                    `;
                }
                
                const querySnapshot = await window.firestore.getDocs(window.firestore.collection(window.db, 'orders'));
                currentOrders = [];
                querySnapshot.forEach((doc) => {
                    currentOrders.push({ id: doc.id, ...doc.data() });
                });
                
                console.log('Successfully loaded orders:', currentOrders.length);
                
                // Always render admin orders if container exists and admin is logged in
                if (ordersContainer && isAdminLoggedIn) {
                    renderAdminOrders(currentOrders);
                }
                
                updateStats();
                
            } catch (error) {
                console.error('Error loading orders:', error);
                
                // Show specific error message
                const ordersContainer = document.getElementById('admin-orders-list');
                if (ordersContainer && isAdminLoggedIn) {
                    ordersContainer.innerHTML = `
                        <div class="text-center text-red-400 py-8">
                            <p>‚ùå ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá</p>
                            <p class="text-sm mt-2">Firebase ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                            <button onclick="loadOrders()" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">
                                ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                        </div>
                    `;
                }
                
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§ Firebase ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§', 'error');
            }
        }

        // Initialize App
        async function initializeApp() {
            console.log('Initializing app...');
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // Wait for Firebase to be fully ready
            let retryCount = 0;
            const maxRetries = 10;
            
            const waitForFirebase = async () => {
                if (!window.db || !window.firestore) {
                    retryCount++;
                    if (retryCount < maxRetries) {
                        console.log(`Firebase not ready, retry ${retryCount}/${maxRetries}...`);
                        setTimeout(waitForFirebase, 1000);
                        return;
                    } else {
                        console.error('Firebase failed to initialize after maximum retries');
                        showToast('‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ó‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                        return;
                    }
                }
                
                console.log('Firebase is ready, loading data...');
                
                // Load initial data
                try {
                    await Promise.all([loadProducts(), loadOrders()]);
                    console.log('Initial data loaded successfully');
                    
                    // Setup real-time listeners after initial load
                    setupRealtimeListeners();
                    
                } catch (error) {
                    console.error('Error during initial data load:', error);
                    showToast('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                }
            };
            
            waitForFirebase();
        }
        
        // Setup real-time listeners
        function setupRealtimeListeners() {
            try {
                console.log('Setting up real-time listeners...');
                
                // Products listener
                window.firestore.onSnapshot(
                    window.firestore.collection(window.db, 'products'), 
                    (snapshot) => {
                        console.log('Products collection changed, reloading...');
                        loadProducts();
                    },
                    (error) => {
                        console.error('Products listener error:', error);
                    }
                );
                
                // Orders listener
                window.firestore.onSnapshot(
                    window.firestore.collection(window.db, 'orders'), 
                    (snapshot) => {
                        console.log('Orders collection changed, reloading...');
                        loadOrders();
                    },
                    (error) => {
                        console.error('Orders listener error:', error);
                    }
                );
                
                console.log('Real-time listeners setup complete');
                
            } catch (error) {
                console.error('Error setting up listeners:', error);
            }
        }

        // Image Slider Functions
        function createImageSlider(containerId, images) {
            if (!images || images.length === 0) return;
            
            const container = document.getElementById(containerId);
            if (!container) return;
            
            let currentIndex = 0;
            
            // Create slider HTML
            const sliderHtml = `
                <div class="image-slider">
                    ${images.map((img, index) => `
                        <img src="${img}" alt="Product Image ${index + 1}" 
                             class="slider-image ${index === 0 ? 'active' : ''}"
                             onerror="this.style.display='none'">
                    `).join('')}
                    
                    ${images.length > 1 ? `
                        <button class="slider-nav slider-prev" onclick="changeSlide('${containerId}', -1)">‚Äπ</button>
                        <button class="slider-nav slider-next" onclick="changeSlide('${containerId}', 1)">‚Ä∫</button>
                        
                        <div class="slider-controls">
                            ${images.map((_, index) => `
                                <div class="slider-dot ${index === 0 ? 'active' : ''}" 
                                     onclick="goToSlide('${containerId}', ${index})"></div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
            
            container.innerHTML = sliderHtml;
            
            // Store current index for this slider
            imageSliders[containerId] = { currentIndex: 0, totalImages: images.length };
        }

        function changeSlide(containerId, direction) {
            const container = document.getElementById(containerId);
            if (!container || !imageSliders[containerId]) return;
            
            const sliderData = imageSliders[containerId];
            const images = container.querySelectorAll('.slider-image');
            const dots = container.querySelectorAll('.slider-dot');
            
            // Remove active class from current image and dot
            images[sliderData.currentIndex].classList.remove('active');
            dots[sliderData.currentIndex].classList.remove('active');
            
            // Calculate new index
            sliderData.currentIndex += direction;
            if (sliderData.currentIndex >= sliderData.totalImages) {
                sliderData.currentIndex = 0;
            } else if (sliderData.currentIndex < 0) {
                sliderData.currentIndex = sliderData.totalImages - 1;
            }
            
            // Add active class to new image and dot
            images[sliderData.currentIndex].classList.add('active');
            dots[sliderData.currentIndex].classList.add('active');
        }

        function goToSlide(containerId, index) {
            const container = document.getElementById(containerId);
            if (!container || !imageSliders[containerId]) return;
            
            const sliderData = imageSliders[containerId];
            const images = container.querySelectorAll('.slider-image');
            const dots = container.querySelectorAll('.slider-dot');
            
            // Remove active class from current image and dot
            images[sliderData.currentIndex].classList.remove('active');
            dots[sliderData.currentIndex].classList.remove('active');
            
            // Set new index
            sliderData.currentIndex = index;
            
            // Add active class to new image and dot
            images[sliderData.currentIndex].classList.add('active');
            dots[sliderData.currentIndex].classList.add('active');
        }

        // Size Selection Functions
        function toggleSizeSection() {
            const category = document.getElementById('product-category').value;
            const sizeSection = document.getElementById('size-section');
            
            if (category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï') {
                sizeSection.style.display = 'block';
            } else {
                sizeSection.style.display = 'none';
                // Clear size inputs
                ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                    document.getElementById(`size-${size}`).value = '';
                });
            }
        }

        function selectSize(size, productId) {
            // Remove previous selection
            document.querySelectorAll(`#product-${productId} .size-option`).forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Add selection to clicked size
            event.target.classList.add('selected');
            document.getElementById('selected-size').value = size;
        }

        // Update current time
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleString('bn-BD', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
        }

        // Admin Login Functions
        function showAdminLogin() {
            document.getElementById('admin-login-modal').classList.add('show');
        }

        function closeAdminLogin() {
            document.getElementById('admin-login-modal').classList.remove('show');
            document.getElementById('admin-login-form').reset();
        }

        async function handleAdminLogin(event) {
            event.preventDefault();
            
            const password = document.getElementById('admin-password').value;
            
            if (password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                document.getElementById('customer-site').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                closeAdminLogin();
                showToast('‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                
                // Show loading in both containers
                const productsContainer = document.getElementById('admin-products-list');
                const ordersContainer = document.getElementById('admin-orders-list');
                
                if (productsContainer) {
                    productsContainer.innerHTML = `
                        <div class="text-center text-white/70 py-8">
                            <p>‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                        </div>
                    `;
                }
                
                if (ordersContainer) {
                    ordersContainer.innerHTML = `
                        <div class="text-center text-white/70 py-8">
                            <p>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                        </div>
                    `;
                }
                
                // Load admin data after login
                console.log('Admin logged in, loading admin data...');
                
                try {
                    // Load products first
                    await loadProducts();
                    console.log('Products loaded after login');
                    
                    // Then load orders
                    await loadOrders();
                    console.log('Orders loaded after login');
                    
                    // Render admin views
                    renderAdminProducts(currentProducts);
                    renderAdminOrders(currentOrders);
                    updateStats();
                    
                    console.log('Admin data loading complete');
                    
                } catch (error) {
                    console.error('Error loading admin data:', error);
                    showToast('‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                }
                
            } else {
                showToast('‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°!', 'error');
            }
        }

        function logoutAdmin() {
            isAdminLoggedIn = false;
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('customer-site').style.display = 'block';
            showToast('‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        }

        // Product filtering
        function filterProducts(category) {
            currentFilter = category;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-white/30');
                btn.classList.add('bg-white/10');
            });
            document.getElementById('filter-' + category).classList.remove('bg-white/10');
            document.getElementById('filter-' + category).classList.add('bg-white/30');
            
            renderCustomerProducts(currentProducts);
        }

        // Render customer products
        function renderCustomerProducts(products) {
            const container = document.getElementById('products-grid');
            
            let filteredProducts = products;
            if (currentFilter !== 'all') {
                filteredProducts = products.filter(product => product.category === currentFilter);
            }
            
            if (filteredProducts.length === 0) {
                container.innerHTML = `
                    <div class="col-span-full text-center text-white/70 py-12">
                        <p class="text-xl">‡¶ï‡ßã‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</p>
                        <p class="text-sm mt-2">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                `;
                return;
            }

            const productsHtml = filteredProducts.map(product => {
                const discountedPrice = product.discount > 0 ? 
                    product.price - (product.price * product.discount / 100) : 
                    product.price;
                
                const images = product.images || [];
                const hasImages = images.length > 0 && images[0];
                
                // Generate size options for clothing
                let sizeOptionsHtml = '';
                if (product.category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï' && product.sizes) {
                    const availableSizes = Object.entries(product.sizes).filter(([size, stock]) => stock > 0);
                    if (availableSizes.length > 0) {
                        sizeOptionsHtml = `
                            <div class="size-selector mb-3">
                                ${availableSizes.map(([size, stock]) => `
                                    <span class="size-option" onclick="selectSize('${size}', '${product.id}')">${size.toUpperCase()}</span>
                                `).join('')}
                            </div>
                        `;
                    }
                }
                
                return `
                    <div id="product-${product.id}" class="product-card rounded-xl p-6">
                        <div class="aspect-square mb-4 overflow-hidden rounded-lg">
                            ${hasImages ? 
                                `<div id="slider-${product.id}"></div>` :
                                `<div class="w-full h-full bg-white/20 flex items-center justify-center">
                                    <svg class="w-16 h-16 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                    </svg>
                                </div>`
                            }
                        </div>
                        
                        <div class="text-center">
                            <h3 class="text-lg font-bold text-white mb-2">${product.product_name}</h3>
                            <p class="text-white/80 text-sm mb-3">${product.category}</p>
                            
                            <div class="mb-4">
                                ${product.discount > 0 ? 
                                    `<div class="flex items-center justify-center gap-2">
                                        <span class="text-xl font-bold text-white">${discountedPrice.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                                        <span class="text-sm text-white/60 line-through">${product.price.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                                    </div>
                                    <span class="inline-block bg-red-500 text-white text-xs px-2 py-1 rounded-full mt-1">
                                        ${product.discount}% ‡¶õ‡¶æ‡¶°‡¶º
                                    </span>` :
                                    `<span class="text-xl font-bold text-white">${product.price.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>`
                                }
                            </div>
                            
                            ${product.description ? `<p class="text-white/80 text-sm mb-4">${product.description}</p>` : ''}
                            
                            ${sizeOptionsHtml}
                            
                            <div class="mb-4">
                                <span class="text-white/80 text-sm">‡¶∏‡ßç‡¶ü‡¶ï: ${product.stock > 0 ? product.stock : '‡¶∂‡ßá‡¶∑'}</span>
                            </div>
                            
                            <div class="space-y-2">
                                <button onclick="addToCart('${product.id}')" 
                                        ${product.stock <= 0 ? 'disabled' : ''}
                                        class="w-full btn-success text-white py-2 px-4 rounded-lg font-semibold ${product.stock <= 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                                    ${product.stock > 0 ? 'üõí ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®' : '‡¶∏‡ßç‡¶ü‡¶ï ‡¶®‡ßá‡¶á'}
                                </button>
                                <button onclick="orderProduct('${product.id}')" 
                                        ${product.stock <= 0 ? 'disabled' : ''}
                                        class="w-full btn-primary text-white py-2 px-4 rounded-lg font-semibold ${product.stock <= 0 ? 'opacity-50 cursor-not-allowed' : ''}">
                                    ${product.stock > 0 ? '‡¶è‡¶ñ‡¶®‡¶á ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞' : '‡¶∏‡ßç‡¶ü‡¶ï ‡¶®‡ßá‡¶á'}
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = productsHtml;
            
            // Initialize image sliders
            filteredProducts.forEach(product => {
                if (product.images && product.images.length > 0 && product.images[0]) {
                    createImageSlider(`slider-${product.id}`, product.images.filter(img => img));
                }
            });
        }

        // Order product
        function orderProduct(productId) {
            const product = currentProducts.find(p => p.id === productId);
            if (!product || product.stock <= 0) return;

            const discountedPrice = product.discount > 0 ? 
                product.price - (product.price * product.discount / 100) : 
                product.price;

            document.getElementById('order-product-id').value = product.id;
            
            // Show size selection for clothing
            const sizeSelection = document.getElementById('size-selection');
            if (product.category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï' && product.sizes) {
                const availableSizes = Object.entries(product.sizes).filter(([size, stock]) => stock > 0);
                if (availableSizes.length > 0) {
                    sizeSelection.style.display = 'block';
                    document.getElementById('size-options').innerHTML = availableSizes.map(([size, stock]) => `
                        <span class="size-option" onclick="selectSize('${size}', 'order')">${size.toUpperCase()}</span>
                    `).join('');
                } else {
                    sizeSelection.style.display = 'none';
                }
            } else {
                sizeSelection.style.display = 'none';
            }

            const mainImage = product.images && product.images[0] ? product.images[0] : null;
            
            document.getElementById('order-product-info').innerHTML = `
                <div class="flex flex-col md:flex-row items-start gap-4">
                    ${mainImage ? 
                        `<div class="w-full md:w-48 h-48 flex-shrink-0">
                            <img src="${mainImage}" alt="${product.product_name}" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-lg">
                        </div>` :
                        `<div class="w-full md:w-48 h-48 bg-gray-200 rounded-lg flex items-center justify-center flex-shrink-0 shadow-lg">
                            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                            </svg>
                        </div>`
                    }
                    <div class="flex-1">
                        <h4 class="font-bold text-gray-800 text-lg mb-2">${product.product_name}</h4>
                        <p class="text-gray-600 mb-1">${product.category}</p>
                        <p class="text-xl font-bold text-gray-800 mb-1">${discountedPrice.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                        ${product.discount > 0 ? `<span class="inline-block bg-red-100 text-red-600 px-2 py-1 rounded text-sm">${product.discount}% ‡¶õ‡¶æ‡¶°‡¶º</span>` : ''}
                        ${product.description ? `<p class="text-gray-600 text-sm mt-2">${product.description}</p>` : ''}
                    </div>
                </div>
            `;

            updateOrderTotal();
            document.getElementById('order-modal').classList.add('show');
        }

        // Cart Functions
        function addToCart(productId) {
            const product = currentProducts.find(p => p.id === productId);
            if (!product || product.stock <= 0) return;

            // Check for size selection if it's clothing
            let selectedSize = null;
            if (product.category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï' && product.sizes) {
                const sizeElement = document.querySelector(`#product-${productId} .size-option.selected`);
                if (!sizeElement) {
                    showToast('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶æ‡¶á‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                    return;
                }
                selectedSize = sizeElement.textContent.toLowerCase();
                
                // Check size stock
                if (!product.sizes[selectedSize] || product.sizes[selectedSize] <= 0) {
                    showToast('‡¶è‡¶á ‡¶∏‡¶æ‡¶á‡¶ú ‡¶∏‡ßç‡¶ü‡¶ï ‡¶®‡ßá‡¶á', 'error');
                    return;
                }
            }

            const cartItemId = selectedSize ? `${productId}_${selectedSize}` : productId;
            const existingItem = cart.find(item => item.cartId === cartItemId);
            
            if (existingItem) {
                const maxStock = selectedSize ? product.sizes[selectedSize] : product.stock;
                if (existingItem.quantity < maxStock) {
                    existingItem.quantity += 1;
                    showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                } else {
                    showToast('‡¶∏‡ßç‡¶ü‡¶ï ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá', 'error');
                    return;
                }
            } else {
                cart.push({
                    cartId: cartItemId,
                    id: product.id,
                    name: product.product_name,
                    price: product.price,
                    discount: product.discount,
                    image: product.images && product.images[0] ? product.images[0] : null,
                    category: product.category,
                    quantity: 1,
                    stock: selectedSize ? product.sizes[selectedSize] : product.stock,
                    size: selectedSize
                });
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
            }
            
            updateCartBadge();
        }

        function updateCartBadge() {
            const badge = document.getElementById('cart-badge');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems;
                badge.style.display = 'flex';
            } else {
                badge.style.display = 'none';
            }
        }

        function showCart() {
            renderCartItems();
            document.getElementById('cart-modal').classList.add('show');
        }

        function closeCart() {
            document.getElementById('cart-modal').classList.remove('show');
        }

        function renderCartItems() {
            const container = document.getElementById('cart-items');
            const summary = document.getElementById('cart-summary');
            const actions = document.getElementById('cart-actions');
            
            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <p>‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø</p>
                    </div>
                `;
                summary.style.display = 'none';
                actions.style.display = 'none';
                return;
            }

            const cartHtml = cart.map(item => {
                const discountedPrice = item.discount > 0 ? 
                    item.price - (item.price * item.discount / 100) : 
                    item.price;
                const itemTotal = discountedPrice * item.quantity;

                return `
                    <div class="cart-item rounded-lg p-4">
                        <div class="flex items-center gap-4">
                            <div class="w-24 h-24 flex-shrink-0">
                                ${item.image ? 
                                    `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover rounded-lg border-2 border-gray-200 shadow-md">` :
                                    `<div class="w-full h-full bg-gray-200 rounded-lg flex items-center justify-center shadow-md">
                                        <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                        </svg>
                                    </div>`
                                }
                            </div>
                            <div class="flex-1">
                                <h4 class="font-bold text-gray-800">${item.name}</h4>
                                <p class="text-gray-600 text-sm">${item.category}</p>
                                ${item.size ? `<p class="text-gray-600 text-sm">‡¶∏‡¶æ‡¶á‡¶ú: ${item.size.toUpperCase()}</p>` : ''}
                                <p class="text-blue-600 font-semibold">${discountedPrice.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                ${item.discount > 0 ? `<span class="text-xs text-red-500">${item.discount}% ‡¶õ‡¶æ‡¶°‡¶º</span>` : ''}
                            </div>
                            <div class="flex items-center gap-2">
                                <button onclick="updateCartQuantity('${item.cartId}', ${item.quantity - 1})" class="bg-gray-300 hover:bg-gray-400 text-gray-700 w-8 h-8 rounded-full flex items-center justify-center">-</button>
                                <span class="w-8 text-center font-semibold">${item.quantity}</span>
                                <button onclick="updateCartQuantity('${item.cartId}', ${item.quantity + 1})" class="bg-blue-500 hover:bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center">+</button>
                            </div>
                            <div class="text-right">
                                <p class="font-bold text-gray-800">${itemTotal.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                <button onclick="removeFromCart('${item.cartId}')" class="text-red-500 hover:text-red-700 text-sm">‡¶∏‡¶∞‡¶æ‡¶®</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = cartHtml;
            updateCartSummary();
            summary.style.display = 'block';
            actions.style.display = 'flex';
        }

        function updateCartQuantity(cartId, newQuantity) {
            const item = cart.find(item => item.cartId === cartId);
            if (!item) return;

            if (newQuantity <= 0) {
                removeFromCart(cartId);
                return;
            }

            if (newQuantity > item.stock) {
                showToast('‡¶∏‡ßç‡¶ü‡¶ï ‡¶∏‡ßÄ‡¶Æ‡¶æ ‡¶Ö‡¶§‡¶ø‡¶ï‡ßç‡¶∞‡¶Æ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá', 'error');
                return;
            }

            item.quantity = newQuantity;
            renderCartItems();
            updateCartBadge();
        }

        function removeFromCart(cartId) {
            cart = cart.filter(item => item.cartId !== cartId);
            renderCartItems();
            updateCartBadge();
            showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        }

        function clearCart() {
            cart = [];
            renderCartItems();
            updateCartBadge();
            showToast('‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        }

        function updateCartSummary() {
            const subtotal = cart.reduce((sum, item) => {
                const discountedPrice = item.discount > 0 ? 
                    item.price - (item.price * item.discount / 100) : 
                    item.price;
                return sum + (discountedPrice * item.quantity);
            }, 0);

            const total = subtotal + deliveryCharge;

            document.getElementById('cart-subtotal').textContent = subtotal.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
            document.getElementById('cart-delivery').textContent = deliveryCharge.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
            document.getElementById('cart-total').textContent = total.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
        }

        function proceedToCheckout() {
            if (cart.length === 0) return;
            
            // Create a combined order from cart items
            const orderData = {
                items: cart,
                subtotal: cart.reduce((sum, item) => {
                    const discountedPrice = item.discount > 0 ? 
                        item.price - (item.price * item.discount / 100) : 
                        item.price;
                    return sum + (discountedPrice * item.quantity);
                }, 0),
                deliveryCharge: deliveryCharge,
                total: cart.reduce((sum, item) => {
                    const discountedPrice = item.discount > 0 ? 
                        item.price - (item.price * item.discount / 100) : 
                        item.price;
                    return sum + (discountedPrice * item.quantity);
                }, 0) + deliveryCharge
            };

            // Show order modal with cart data
            showOrderModalFromCart(orderData);
            closeCart();
        }

        function showOrderModalFromCart(orderData) {
            document.getElementById('order-product-info').innerHTML = `
                <div class="space-y-3">
                    <h4 class="font-bold text-gray-800 mb-3">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶Æ‡¶æ‡¶∞‡¶ø (${orderData.items.length}‡¶ü‡¶ø ‡¶™‡¶£‡ßç‡¶Ø)</h4>
                    ${orderData.items.map(item => {
                        const discountedPrice = item.discount > 0 ? 
                            item.price - (item.price * item.discount / 100) : 
                            item.price;
                        return `
                            <div class="flex items-center justify-between bg-gray-50 p-3 rounded">
                                <div class="flex items-center gap-3">
                                    ${item.image ? 
                                        `<img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-lg border border-gray-300 shadow-sm">` :
                                        `<div class="w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center shadow-sm">üì¶</div>`
                                    }
                                    <div class="flex-1">
                                        <p class="font-semibold text-sm">${item.name}</p>
                                        ${item.size ? `<p class="text-gray-600 text-xs">‡¶∏‡¶æ‡¶á‡¶ú: ${item.size.toUpperCase()}</p>` : ''}
                                        <p class="text-gray-600 text-xs">${discountedPrice.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ √ó ${item.quantity}</p>
                                    </div>
                                </div>
                                <p class="font-bold text-gray-800">${(discountedPrice * item.quantity).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;

            // Set order type to cart
            document.getElementById('order-product-id').value = 'cart_order';
            
            // Hide size selection for cart orders
            document.getElementById('size-selection').style.display = 'none';
            
            // Update totals
            updateOrderTotalFromCart(orderData);
            document.getElementById('order-modal').classList.add('show');
        }

        function updateOrderTotalFromCart(orderData) {
            const area = document.getElementById('delivery-area').value;
            let delivery = 0;
            
            if (area === 'dhaka') delivery = 70;
            else if (area === 'outside') delivery = 120;
            
            const productAmount = orderData.subtotal;
            
            // Check payment method for bKash discount
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked')?.value;
            let bkashDiscount = 0;
            let finalProductAmount = productAmount;
            
            if (paymentMethod === 'bkash') {
                bkashDiscount = Math.round(productAmount * 0.02); // 2% discount
                finalProductAmount = productAmount - bkashDiscount;
            }
            
            const total = finalProductAmount + delivery;

            // Update bKash section
            document.getElementById('product-amount-display').textContent = productAmount.toLocaleString('bn-BD');
            document.getElementById('delivery-charge-display').textContent = delivery.toLocaleString('bn-BD');
            
            if (bkashDiscount > 0) {
                document.getElementById('total-amount-display').innerHTML = `
                    <span class="line-through text-gray-500">${(productAmount + delivery).toLocaleString('bn-BD')}</span>
                    <span class="text-green-600 font-bold ml-2">${total.toLocaleString('bn-BD')}</span>
                    <div class="text-sm text-green-600">bKash ‡¶õ‡¶æ‡¶°‡¶º: ${bkashDiscount.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ (‡ß®%)</div>
                `;
            } else {
                document.getElementById('total-amount-display').textContent = total.toLocaleString('bn-BD');
            }

            // Update COD section
            document.getElementById('cod-product-amount').textContent = productAmount.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
            document.getElementById('cod-delivery-charge').textContent = delivery.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
            document.getElementById('cod-total-amount').textContent = (productAmount + delivery).toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
        }

        // Update order total
        function updateOrderTotal() {
            const productId = document.getElementById('order-product-id').value;
            
            if (productId === 'cart_order') {
                // Handle cart order
                const orderData = {
                    subtotal: cart.reduce((sum, item) => {
                        const discountedPrice = item.discount > 0 ? 
                            item.price - (item.price * item.discount / 100) : 
                            item.price;
                        return sum + (discountedPrice * item.quantity);
                    }, 0)
                };
                updateOrderTotalFromCart(orderData);
                return;
            }

            const quantity = parseInt(document.getElementById('order-quantity').value) || 1;
            const product = currentProducts.find(p => p.id === productId);
            
            if (product) {
                const discountedPrice = product.discount > 0 ? 
                    product.price - (product.price * product.discount / 100) : 
                    product.price;
                let productAmount = discountedPrice * quantity;
                const area = document.getElementById('delivery-area').value;
                let delivery = 0;
                
                if (area === 'dhaka') delivery = 70;
                else if (area === 'outside') delivery = 120;
                
                // Check payment method for bKash discount
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked')?.value;
                let bkashDiscount = 0;
                let finalProductAmount = productAmount;
                
                if (paymentMethod === 'bkash') {
                    bkashDiscount = Math.round(productAmount * 0.02); // 2% discount
                    finalProductAmount = productAmount - bkashDiscount;
                }
                
                const total = finalProductAmount + delivery;

                // Update bKash section
                document.getElementById('product-amount-display').textContent = productAmount.toLocaleString('bn-BD');
                document.getElementById('delivery-charge-display').textContent = delivery.toLocaleString('bn-BD');
                
                if (bkashDiscount > 0) {
                    document.getElementById('total-amount-display').innerHTML = `
                        <span class="line-through text-gray-500">${(productAmount + delivery).toLocaleString('bn-BD')}</span>
                        <span class="text-green-600 font-bold ml-2">${total.toLocaleString('bn-BD')}</span>
                        <div class="text-sm text-green-600">bKash ‡¶õ‡¶æ‡¶°‡¶º: ${bkashDiscount.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ (‡ß®%)</div>
                    `;
                } else {
                    document.getElementById('total-amount-display').textContent = total.toLocaleString('bn-BD');
                }

                // Update COD section
                document.getElementById('cod-product-amount').textContent = productAmount.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
                document.getElementById('cod-delivery-charge').textContent = delivery.toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
                document.getElementById('cod-total-amount').textContent = (productAmount + delivery).toLocaleString('bn-BD') + ' ‡¶ü‡¶æ‡¶ï‡¶æ';
            }
        }

        function updateDeliveryCharge() {
            updateOrderTotal();
        }

        function togglePaymentSection() {
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
            const bkashSection = document.getElementById('bkash-payment-section');
            const codSection = document.getElementById('cod-payment-section');
            const transactionField = document.getElementById('transaction-id');
            
            if (paymentMethod === 'bkash') {
                bkashSection.style.display = 'block';
                codSection.style.display = 'none';
                transactionField.required = true;
            } else {
                bkashSection.style.display = 'none';
                codSection.style.display = 'block';
                transactionField.required = false;
                transactionField.value = '';
            }
            
            // Update totals when payment method changes
            updateOrderTotal();
        }

        // Close order modal
        function closeOrderModal() {
            document.getElementById('order-modal').classList.remove('show');
            document.getElementById('order-form').reset();
            document.getElementById('selected-size').value = '';
        }

        // Submit order
        async function submitOrder(event) {
            event.preventDefault();
            
            const productId = document.getElementById('order-product-id').value;
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
            const deliveryArea = document.getElementById('delivery-area').value;
            
            if (!deliveryArea) {
                showToast('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                return;
            }

            const deliveryCharge = deliveryArea === 'dhaka' ? 70 : 120;
            const transactionId = document.getElementById('transaction-id').value;

            if (paymentMethod === 'bkash' && !transactionId) {
                showToast('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá bKash Transaction ID ‡¶¶‡¶ø‡¶®', 'error');
                return;
            }

            // Check for size selection if needed
            let selectedSize = null;
            if (productId !== 'cart_order') {
                const product = currentProducts.find(p => p.id === productId);
                if (product && product.category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï' && product.sizes) {
                    selectedSize = document.getElementById('selected-size').value;
                    if (!selectedSize) {
                        showToast('‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶∏‡¶æ‡¶á‡¶ú ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®', 'error');
                        return;
                    }
                }
            }

            try {
                if (productId === 'cart_order') {
                    // Handle cart order
                    let subtotal = cart.reduce((sum, item) => {
                        const discountedPrice = item.discount > 0 ? 
                            item.price - (item.price * item.discount / 100) : 
                            item.price;
                        return sum + (discountedPrice * item.quantity);
                    }, 0);
                    
                    // Apply bKash discount
                    let bkashDiscount = 0;
                    if (paymentMethod === 'bkash') {
                        bkashDiscount = Math.round(subtotal * 0.02); // 2% discount
                        subtotal = subtotal - bkashDiscount;
                    }

                    const orderData = {
                        product_id: 'multiple',
                        product_name: `‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø‡¶™‡¶≤ ‡¶™‡¶£‡ßç‡¶Ø (${cart.length}‡¶ü‡¶ø)`,
                        product_category: '‡¶Æ‡¶ø‡¶∂‡ßç‡¶∞',
                        customer_name: document.getElementById('customer-name').value,
                        phone: document.getElementById('customer-phone').value,
                        address: document.getElementById('customer-address').value,
                        quantity: cart.reduce((sum, item) => sum + item.quantity, 0),
                        price: subtotal,
                        discount: 0,
                        bkash_discount: bkashDiscount,
                        delivery_charge: deliveryCharge,
                        delivery_area: deliveryArea === 'dhaka' ? '‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá' : '‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶π‡¶ø‡¶∞‡ßá',
                        total_amount: subtotal + deliveryCharge,
                        payment_method: paymentMethod === 'bkash' ? 'bKash' : '‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø',
                        transaction_id: transactionId || 'COD',
                        cart_items: JSON.stringify(cart),
                        status: '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞',
                        order_date: new Date().toISOString()
                    };

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'orders'), orderData);
                    showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§');
                    cart = []; // Clear cart
                    updateCartBadge();
                    closeOrderModal();
                } else {
                    // Handle single product order
                    const product = currentProducts.find(p => p.id === productId);
                    if (!product) return;

                    const quantity = parseInt(document.getElementById('order-quantity').value);
                    const discountedPrice = product.discount > 0 ? 
                        product.price - (product.price * product.discount / 100) : 
                        product.price;
                    let productAmount = discountedPrice * quantity;
                    
                    // Apply bKash discount
                    let bkashDiscount = 0;
                    if (paymentMethod === 'bkash') {
                        bkashDiscount = Math.round(productAmount * 0.02); // 2% discount
                        productAmount = productAmount - bkashDiscount;
                    }

                    const orderData = {
                        product_id: productId,
                        product_name: product.product_name,
                        product_category: product.category,
                        customer_name: document.getElementById('customer-name').value,
                        phone: document.getElementById('customer-phone').value,
                        address: document.getElementById('customer-address').value,
                        quantity: quantity,
                        price: discountedPrice,
                        discount: product.discount,
                        bkash_discount: bkashDiscount,
                        size: selectedSize || '',
                        delivery_charge: deliveryCharge,
                        delivery_area: deliveryArea === 'dhaka' ? '‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá' : '‡¶¢‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶π‡¶ø‡¶∞‡ßá',
                        total_amount: productAmount + deliveryCharge,
                        payment_method: paymentMethod === 'bkash' ? 'bKash' : '‡¶ï‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶Ö‡¶® ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø',
                        transaction_id: transactionId || 'COD',
                        status: '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞',
                        order_date: new Date().toISOString()
                    };

                    await window.firestore.addDoc(window.firestore.collection(window.db, 'orders'), orderData);
                    showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá! ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§');
                    closeOrderModal();
                }
            } catch (error) {
                console.error('Error submitting order:', error);
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            }
        }

        // Admin tab switching
        function switchAdminTab(tab) {
            currentTab = tab;
            console.log('Switching to admin tab:', tab);
            
            // Update tab buttons
            document.querySelectorAll('#admin-panel .tab-button').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('text-white/80');
            });
            document.getElementById('admin-' + tab + '-tab').classList.add('active');
            document.getElementById('admin-' + tab + '-tab').classList.remove('text-white/80');
            
            // Show/hide content
            document.getElementById('admin-products-content').style.display = tab === 'products' ? 'block' : 'none';
            document.getElementById('admin-orders-content').style.display = tab === 'orders' ? 'block' : 'none';
            
            // Force re-render data for the active tab
            if (tab === 'products') {
                renderAdminProducts(currentProducts);
            } else if (tab === 'orders') {
                console.log('Switching to orders tab, current orders:', currentOrders.length);
                
                // Always show loading first when switching to orders tab
                const ordersContainer = document.getElementById('admin-orders-list');
                if (ordersContainer) {
                    ordersContainer.innerHTML = `
                        <div class="text-center text-white/70 py-8">
                            <p>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                        </div>
                    `;
                }
                
                // Always force reload orders when switching to orders tab
                console.log('Force reloading orders...');
                setTimeout(() => {
                    loadOrders();
                }, 500);
            }
        }

        // Validate image URL
        function isValidImageUrl(url) {
            try {
                new URL(url);
                return /\.(jpg|jpeg|png|gif|webp|svg)(\?.*)?$/i.test(url) || 
                       url.includes('postimg.cc') || 
                       url.includes('imgbb.com') || 
                       url.includes('imgur.com');
            } catch {
                return false;
            }
        }

        // Add product
        async function addProduct(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('add-product-btn');
            const originalText = submitBtn.textContent;
            
            submitBtn.textContent = '‡¶∏‡ßá‡¶≠ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            submitBtn.disabled = true;
            document.getElementById('product-form').classList.add('loading');

            try {
                // Collect image URLs
                const imageInputs = document.querySelectorAll('.image-url-input');
                const images = [];
                imageInputs.forEach(input => {
                    const url = input.value.trim();
                    if (url && isValidImageUrl(url)) {
                        images.push(url);
                    }
                });

                // Collect sizes for clothing
                let sizes = null;
                const category = document.getElementById('product-category').value;
                if (category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï') {
                    sizes = {};
                    ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                        const stock = parseInt(document.getElementById(`size-${size}`).value) || 0;
                        if (stock > 0) {
                            sizes[size] = stock;
                        }
                    });
                }

                const productData = {
                    product_name: document.getElementById('product-name').value,
                    category: category,
                    price: parseInt(document.getElementById('product-price').value),
                    discount: parseInt(document.getElementById('product-discount').value) || 0,
                    stock: parseInt(document.getElementById('product-stock').value) || 0,
                    description: document.getElementById('product-description').value,
                    images: images,
                    sizes: sizes,
                    status: 'active',
                    created_date: new Date().toISOString()
                };

                await window.firestore.addDoc(window.firestore.collection(window.db, 'products'), productData);
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                document.getElementById('product-form').reset();
                document.getElementById('size-section').style.display = 'none';
            } catch (error) {
                console.error('Error adding product:', error);
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                document.getElementById('product-form').classList.remove('loading');
            }
        }

        // Add another product (keeps form filled for quick addition)
        function addAnotherProduct() {
            // Keep category, discount, and other common fields
            const category = document.getElementById('product-category').value;
            const discount = document.getElementById('product-discount').value;
            
            // Clear only product-specific fields
            document.getElementById('product-name').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-stock').value = '10';
            document.getElementById('product-description').value = '';
            
            // Clear image inputs
            document.querySelectorAll('.image-url-input').forEach(input => {
                input.value = '';
            });
            
            // Clear size inputs
            ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                document.getElementById(`size-${size}`).value = '';
            });
            
            // Focus on product name for quick entry
            document.getElementById('product-name').focus();
            
            showToast('‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®‡•§ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶ó‡¶∞‡¶ø ‡¶ì ‡¶õ‡¶æ‡¶°‡¶º ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶∞‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§');
        }

        // Render admin products
        function renderAdminProducts(products) {
            const container = document.getElementById('admin-products-list');
            
            if (!container) {
                console.error('Admin products container not found');
                return;
            }
            
            console.log('Rendering admin products:', products.length);
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-white/70 py-8">
                        <p>‡¶ï‡ßã‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡¶®‡¶ø</p>
                        <p class="text-sm mt-2">‡¶â‡¶™‡¶∞‡ßá‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    </div>
                `;
                return;
            }

            const productsHtml = products.map(product => {
                const mainImage = product.images && product.images[0] ? product.images[0] : null;
                const sizeInfo = product.sizes ? Object.entries(product.sizes).map(([size, stock]) => `${size.toUpperCase()}:${stock}`).join(', ') : '';
                
                return `
                    <div class="bg-white/5 border border-white/20 rounded-lg p-6">
                        <div class="grid md:grid-cols-4 gap-4 items-center">
                            <div class="flex items-center gap-4">
                                ${mainImage ? 
                                    `<img src="${mainImage}" alt="${product.product_name}" class="w-16 h-16 object-cover rounded-lg">` :
                                    `<div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center">
                                        <svg class="w-8 h-8 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                        </svg>
                                    </div>`
                                }
                                <div>
                                    <h4 class="font-bold text-white">${product.product_name}</h4>
                                    <p class="text-white/80 text-sm">${product.category}</p>
                                    ${sizeInfo ? `<p class="text-white/60 text-xs">‡¶∏‡¶æ‡¶á‡¶ú: ${sizeInfo}</p>` : ''}
                                </div>
                            </div>
                            
                            <div class="text-center">
                                <p class="text-white font-semibold">${product.price.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                ${product.discount > 0 ? `<p class="text-green-400 text-sm">${product.discount}% ‡¶õ‡¶æ‡¶°‡¶º</p>` : ''}
                            </div>
                            
                            <div class="text-center">
                                <p class="text-white">‡¶∏‡ßç‡¶ü‡¶ï: ${product.stock}</p>
                                <span class="inline-block px-2 py-1 rounded-full text-xs ${product.status === 'active' ? 'bg-green-500' : 'bg-red-500'} text-white">
                                    ${product.status === 'active' ? '‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º' : '‡¶®‡¶ø‡¶∑‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º'}
                                </span>
                            </div>
                            
                            <div class="flex gap-2 justify-end">
                                <button onclick="editProduct('${product.id}')" class="btn-warning text-white px-4 py-2 rounded-lg text-sm font-semibold">
                                    ‡¶è‡¶°‡¶ø‡¶ü
                                </button>
                                <button onclick="deleteProduct('${product.id}')" class="btn-danger text-white px-4 py-2 rounded-lg text-sm font-semibold">
                                    ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                </button>
                            </div>
                        </div>
                        ${product.description ? `<p class="text-white/80 text-sm mt-4">${product.description}</p>` : ''}
                        ${product.images && product.images.length > 1 ? `<p class="text-white/60 text-xs mt-2">‡¶Æ‡ßã‡¶ü ‡¶õ‡¶¨‡¶ø: ${product.images.length}‡¶ü‡¶ø</p>` : ''}
                    </div>
                `;
            }).join('');

            container.innerHTML = productsHtml;
        }

        // Render admin orders
        function renderAdminOrders(orders) {
            const container = document.getElementById('admin-orders-list');
            
            if (!container) {
                console.error('Admin orders container not found');
                return;
            }
            
            console.log('Rendering admin orders:', orders.length);
            
            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="text-center text-white/70 py-8">
                        <p>‡¶ï‡ßã‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</p>
                        <p class="text-sm mt-2">‡¶ó‡ßç‡¶∞‡¶æ‡¶π‡¶ï‡¶∞‡¶æ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</p>
                    </div>
                `;
                return;
            }

            const ordersHtml = orders.slice().reverse().map(order => {
                let cartItemsHtml = '';
                if (order.cart_items) {
                    try {
                        const cartItems = JSON.parse(order.cart_items);
                        cartItemsHtml = `
                            <div class="mt-2 p-2 bg-white/10 rounded">
                                <p class="text-white/80 text-xs mb-1">‡¶ï‡¶æ‡¶∞‡ßç‡¶ü ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ:</p>
                                ${cartItems.map(item => `
                                    <p class="text-white/70 text-xs">‚Ä¢ ${item.name} ${item.size ? `(${item.size.toUpperCase()})` : ''} (${item.quantity}‡¶ü‡¶ø)</p>
                                `).join('')}
                            </div>
                        `;
                    } catch (e) {
                        cartItemsHtml = '';
                    }
                }

                return `
                    <div class="bg-white/5 border border-white/20 rounded-lg p-6">
                        <div class="grid md:grid-cols-3 gap-4">
                            <div>
                                <h4 class="font-bold text-white mb-2">${order.customer_name}</h4>
                                <p class="text-white/80 text-sm mb-1">üì± ${order.phone}</p>
                                <p class="text-white/80 text-sm mb-2">üìç ${order.address}</p>
                                <p class="text-white/80 text-sm mb-1">üìÖ ${new Date(order.order_date).toLocaleDateString('bn-BD')}</p>
                                <p class="text-white/80 text-sm">üöö ${order.delivery_area || 'N/A'}</p>
                            </div>
                            
                            <div>
                                <p class="text-white font-semibold">${order.product_category} - ${order.product_name}</p>
                                <p class="text-white/80">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£: ${order.quantity}</p>
                                ${order.size ? `<p class="text-white/80">‡¶∏‡¶æ‡¶á‡¶ú: ${order.size.toUpperCase()}</p>` : ''}
                                ${order.discount > 0 ? `<p class="text-white/80">‡¶õ‡¶æ‡¶°‡¶º: ${order.discount}%</p>` : ''}
                                <p class="text-white/80">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¶‡¶æ‡¶Æ: ${(order.total_amount - (order.delivery_charge || 0)).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                <p class="text-white/80">‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø: ${(order.delivery_charge || 0).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                <p class="text-xl font-bold text-white">‡¶Æ‡ßã‡¶ü: ${order.total_amount.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</p>
                                <p class="text-white/80 text-sm">üí≥ ${order.payment_method}: ${order.transaction_id}</p>
                                ${cartItemsHtml}
                            </div>
                            
                            <div class="text-right">
                                <select onchange="updateOrderStatus('${order.id}', this.value)" class="mb-2 px-3 py-2 bg-white/20 border border-white/30 rounded text-white text-sm">
                                    <option value="‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞" ${order.status === '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞' ? 'selected' : ''}>‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞</option>
                                    <option value="‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç" ${order.status === '‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç' ? 'selected' : ''}>‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç</option>
                                    <option value="‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø" ${order.status === '‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø' ? 'selected' : ''}>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø</option>
                                    <option value="‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®" ${order.status === '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®' ? 'selected' : ''}>‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®</option>
                                    <option value="‡¶¨‡¶æ‡¶§‡¶ø‡¶≤" ${order.status === '‡¶¨‡¶æ‡¶§‡¶ø‡¶≤' ? 'selected' : ''}>‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</option>
                                </select>
                                <br>
                                <div class="space-y-2">
                                    <button onclick="generateInvoice('${order.id}')" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold">
                                        üìÑ ‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏
                                    </button>
                                    <button onclick="deleteOrder('${order.id}')" class="w-full btn-danger text-white px-4 py-2 rounded-lg text-sm font-semibold">
                                        ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = ordersHtml;
        }

        // Update statistics
        function updateStats() {
            const allProducts = currentProducts.length;
            document.getElementById('total-products').textContent = allProducts;
            document.getElementById('total-orders').textContent = currentOrders.length;
            
            const pendingOrders = currentOrders.filter(order => 
                order.status === '‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞' || order.status === '‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡¶ø‡¶Ç'
            ).length;
            document.getElementById('pending-orders').textContent = pendingOrders;
            
            const totalRevenue = currentOrders
                .filter(order => order.status === '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®')
                .reduce((sum, order) => sum + (order.total_amount || 0), 0);
            document.getElementById('total-revenue').textContent = totalRevenue.toLocaleString('bn-BD');
        }

        // Delete product
        async function deleteProduct(productId) {
            const product = currentProducts.find(p => p.id === productId);
            if (!product) return;

            const confirmBtn = event.target;
            const originalText = confirmBtn.textContent;
            
            confirmBtn.textContent = '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?';
            confirmBtn.style.background = '#dc2626';
            
            setTimeout(() => {
                confirmBtn.textContent = originalText;
                confirmBtn.style.background = '';
            }, 3000);

            const handleConfirm = async () => {
                if (confirmBtn.textContent === '‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?') {
                    try {
                        await window.firestore.deleteDoc(window.firestore.doc(window.db, 'products', productId));
                        showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
                    } catch (error) {
                        console.error('Error deleting product:', error);
                        showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
                    }
                    confirmBtn.removeEventListener('click', handleConfirm);
                }
            };

            confirmBtn.addEventListener('click', handleConfirm);
        }

        // Update order status
        async function updateOrderStatus(orderId, newStatus) {
            try {
                await window.firestore.updateDoc(window.firestore.doc(window.db, 'orders', orderId), {
                    status: newStatus
                });
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            } catch (error) {
                console.error('Error updating order:', error);
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            }
        }

        // Delete order
        async function deleteOrder(orderId) {
            try {
                await window.firestore.deleteDoc(window.firestore.doc(window.db, 'orders', orderId));
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
            } catch (error) {
                console.error('Error deleting order:', error);
                showToast('‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            }
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Event listeners
        document.getElementById('admin-login-form').addEventListener('submit', handleAdminLogin);
        document.getElementById('product-form').addEventListener('submit', addProduct);
        document.getElementById('edit-product-form').addEventListener('submit', updateProduct);
        document.getElementById('order-form').addEventListener('submit', submitOrder);
        document.getElementById('order-quantity').addEventListener('input', updateOrderTotal);

        // Close modals when clicking outside
        document.getElementById('admin-login-modal').addEventListener('click', function(e) {
            if (e.target === this) closeAdminLogin();
        });

        document.getElementById('order-modal').addEventListener('click', function(e) {
            if (e.target === this) closeOrderModal();
        });

        document.getElementById('cart-modal').addEventListener('click', function(e) {
            if (e.target === this) closeCart();
        });

        document.getElementById('edit-product-modal').addEventListener('click', function(e) {
            if (e.target === this) closeEditProduct();
        });

        document.getElementById('invoice-modal').addEventListener('click', function(e) {
            if (e.target === this) closeInvoice();
        });

        // Edit Product Functions
        function editProduct(productId) {
            const product = currentProducts.find(p => p.id === productId);
            if (!product) return;

            // Fill form with current product data
            document.getElementById('edit-product-id').value = product.id;
            document.getElementById('edit-product-name').value = product.product_name;
            document.getElementById('edit-product-category').value = product.category;
            document.getElementById('edit-product-price').value = product.price;
            document.getElementById('edit-product-discount').value = product.discount || 0;
            document.getElementById('edit-product-stock').value = product.stock || 0;
            document.getElementById('edit-product-description').value = product.description || '';

            // Fill images
            const imageInputs = document.querySelectorAll('.edit-image-url-input');
            imageInputs.forEach((input, index) => {
                input.value = (product.images && product.images[index]) ? product.images[index] : '';
            });

            // Fill sizes if clothing
            if (product.category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï' && product.sizes) {
                document.getElementById('edit-size-section').style.display = 'block';
                ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                    document.getElementById(`edit-size-${size}`).value = product.sizes[size] || '';
                });
            } else {
                document.getElementById('edit-size-section').style.display = 'none';
            }

            document.getElementById('edit-product-modal').classList.add('show');
        }

        function closeEditProduct() {
            document.getElementById('edit-product-modal').classList.remove('show');
            document.getElementById('edit-product-form').reset();
        }

        function toggleEditSizeSection() {
            const category = document.getElementById('edit-product-category').value;
            const sizeSection = document.getElementById('edit-size-section');
            
            if (category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï') {
                sizeSection.style.display = 'block';
            } else {
                sizeSection.style.display = 'none';
                // Clear size inputs
                ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                    document.getElementById(`edit-size-${size}`).value = '';
                });
            }
        }

        async function updateProduct(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('update-product-btn');
            const originalText = submitBtn.textContent;
            
            submitBtn.textContent = '‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            submitBtn.disabled = true;
            document.getElementById('edit-product-form').classList.add('loading');

            try {
                const productId = document.getElementById('edit-product-id').value;
                
                // Collect image URLs
                const imageInputs = document.querySelectorAll('.edit-image-url-input');
                const images = [];
                imageInputs.forEach(input => {
                    const url = input.value.trim();
                    if (url && isValidImageUrl(url)) {
                        images.push(url);
                    }
                });

                // Collect sizes for clothing
                let sizes = null;
                const category = document.getElementById('edit-product-category').value;
                if (category === '‡¶™‡ßã‡¶∂‡¶æ‡¶ï') {
                    sizes = {};
                    ['s', 'm', 'l', 'xl', 'xxl', 'xxxl'].forEach(size => {
                        const stock = parseInt(document.getElementById(`edit-size-${size}`).value) || 0;
                        if (stock > 0) {
                            sizes[size] = stock;
                        }
                    });
                }

                const productData = {
                    product_name: document.getElementById('edit-product-name').value,
                    category: category,
                    price: parseInt(document.getElementById('edit-product-price').value),
                    discount: parseInt(document.getElementById('edit-product-discount').value) || 0,
                    stock: parseInt(document.getElementById('edit-product-stock').value) || 0,
                    description: document.getElementById('edit-product-description').value,
                    images: images,
                    sizes: sizes,
                    updated_date: new Date().toISOString()
                };

                await window.firestore.updateDoc(window.firestore.doc(window.db, 'products', productId), productData);
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                closeEditProduct();
            } catch (error) {
                console.error('Error updating product:', error);
                showToast('‡¶™‡¶£‡ßç‡¶Ø ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'error');
            } finally {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                document.getElementById('edit-product-form').classList.remove('loading');
            }
        }

        // Invoice Functions
        function generateInvoice(orderId) {
            const order = currentOrders.find(o => o.id === orderId);
            if (!order) return;

            const invoiceDate = new Date().toLocaleDateString('bn-BD');
            const orderDate = new Date(order.order_date).toLocaleDateString('bn-BD');
            
            let cartItemsHtml = '';
            let itemsTotal = 0;
            
            if (order.cart_items) {
                try {
                    const cartItems = JSON.parse(order.cart_items);
                    cartItemsHtml = cartItems.map(item => {
                        const discountedPrice = item.discount > 0 ? 
                            item.price - (item.price * item.discount / 100) : 
                            item.price;
                        const itemTotal = discountedPrice * item.quantity;
                        itemsTotal += itemTotal;
                        
                        return `
                            <tr class="border-b">
                                <td class="py-2">${item.name} ${item.size ? `(${item.size.toUpperCase()})` : ''}</td>
                                <td class="py-2 text-center">${item.quantity}</td>
                                <td class="py-2 text-right">${discountedPrice.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                                <td class="py-2 text-right font-semibold">${itemTotal.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                            </tr>
                        `;
                    }).join('');
                } catch (e) {
                    cartItemsHtml = `
                        <tr class="border-b">
                            <td class="py-2">${order.product_name} ${order.size ? `(${order.size.toUpperCase()})` : ''}</td>
                            <td class="py-2 text-center">${order.quantity}</td>
                            <td class="py-2 text-right">${order.price.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                            <td class="py-2 text-right font-semibold">${(order.price * order.quantity).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                        </tr>
                    `;
                    itemsTotal = order.price * order.quantity;
                }
            } else {
                cartItemsHtml = `
                    <tr class="border-b">
                        <td class="py-2">${order.product_name} ${order.size ? `(${order.size.toUpperCase()})` : ''}</td>
                        <td class="py-2 text-center">${order.quantity}</td>
                        <td class="py-2 text-right">${order.price.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                        <td class="py-2 text-right font-semibold">${(order.price * order.quantity).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                    </tr>
                `;
                itemsTotal = order.price * order.quantity;
            }

            const invoiceHtml = `
                <div class="invoice-print" style="font-family: 'Noto Sans Bengali', Arial, sans-serif; font-size: 14px; line-height: 1.4; color: #333;">
                    <!-- Company Header -->
                    <div style="text-align: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 2px solid #3b82f6;">
                        <h1 style="font-size: 24px; font-weight: bold; color: #1e40af; margin: 0;">Shaon BD Shop</h1>
                        <p style="margin: 5px 0; color: #6b7280;">‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∂‡¶™‡¶ø‡¶Ç</p>
                        <p style="margin: 5px 0; color: #6b7280;">üìû 01881385068 | üìß info@shaonbdshop.com</p>
                    </div>

                    <!-- Invoice Info -->
                    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                        <div>
                            <h3 style="font-size: 18px; font-weight: bold; margin: 0 0 10px 0;">‡¶¨‡¶ø‡¶≤ ‡¶™‡ßç‡¶∞‡¶æ‡¶™‡¶ï:</h3>
                            <p style="margin: 2px 0;"><strong>‡¶®‡¶æ‡¶Æ:</strong> ${order.customer_name}</p>
                            <p style="margin: 2px 0;"><strong>‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤:</strong> ${order.phone}</p>
                            <p style="margin: 2px 0;"><strong>‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</strong> ${order.address}</p>
                        </div>
                        <div style="text-align: right;">
                            <p style="margin: 2px 0;"><strong>‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶®‡¶Ç:</strong> #${order.id.substring(0, 8).toUpperCase()}</p>
                            <p style="margin: 2px 0;"><strong>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${orderDate}</p>
                            <p style="margin: 2px 0;"><strong>‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</strong> ${invoiceDate}</p>
                            <p style="margin: 2px 0;"><strong>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏:</strong> <span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">${order.status}</span></p>
                        </div>
                    </div>

                    <!-- Items Table -->
                    <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                        <thead>
                            <tr style="background: #f3f4f6;">
                                <th style="padding: 10px; text-align: left; border: 1px solid #d1d5db;">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                <th style="padding: 10px; text-align: center; border: 1px solid #d1d5db;">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                <th style="padding: 10px; text-align: right; border: 1px solid #d1d5db;">‡¶è‡¶ï‡¶ï ‡¶¶‡¶æ‡¶Æ</th>
                                <th style="padding: 10px; text-align: right; border: 1px solid #d1d5db;">‡¶Æ‡ßã‡¶ü</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${cartItemsHtml}
                        </tbody>
                    </table>

                    <!-- Totals -->
                    <div style="margin-left: auto; width: 300px;">
                        <div style="border: 1px solid #d1d5db; padding: 15px; background: #f9fafb;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>‡¶∏‡¶æ‡¶¨‡¶ü‡ßã‡¶ü‡¶æ‡¶≤:</span>
                                <span>${itemsTotal.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                            </div>
                            ${order.discount > 0 ? `
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #ef4444;">
                                    <span>‡¶™‡¶£‡ßç‡¶Ø ‡¶õ‡¶æ‡¶°‡¶º (${order.discount}%):</span>
                                    <span>-${Math.round(itemsTotal * order.discount / 100).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                                </div>
                            ` : ''}
                            ${order.bkash_discount > 0 ? `
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; color: #10b981;">
                                    <span>bKash ‡¶õ‡¶æ‡¶°‡¶º (‡ß®%):</span>
                                    <span>-${order.bkash_discount.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                                </div>
                            ` : ''}
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú:</span>
                                <span>${(order.delivery_charge || 0).toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                            </div>
                            <hr style="margin: 10px 0; border: none; border-top: 1px solid #d1d5db;">
                            <div style="display: flex; justify-content: space-between; font-size: 16px; font-weight: bold;">
                                <span>‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü:</span>
                                <span style="color: #1e40af;">${order.total_amount.toLocaleString('bn-BD')} ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Info -->
                    <div style="margin-top: 20px; padding: 15px; background: #f0f9ff; border-left: 4px solid #3b82f6;">
                        <h4 style="margin: 0 0 10px 0; color: #1e40af;">‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø:</h4>
                        <p style="margin: 2px 0;"><strong>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø:</strong> ${order.payment_method}</p>
                        <p style="margin: 2px 0;"><strong>‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ID:</strong> ${order.transaction_id}</p>
                        <p style="margin: 2px 0;"><strong>‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ:</strong> ${order.delivery_area}</p>
                    </div>

                    <!-- Footer -->
                    <div style="margin-top: 30px; text-align: center; padding-top: 20px; border-top: 1px solid #d1d5db; color: #6b7280; font-size: 12px;">
                        <p style="margin: 5px 0;">‡¶ß‡¶®‡ßç‡¶Ø‡¶¨‡¶æ‡¶¶ ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡ßá‡¶®‡¶æ‡¶ï‡¶æ‡¶ü‡¶æ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø!</p>
                        <p style="margin: 5px 0;">‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®: 01881385068</p>
                        <p style="margin: 5px 0;">¬© ${new Date().getFullYear()} Shaon BD Shop. ‡¶∏‡¶ï‡¶≤ ‡¶Ö‡¶ß‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§‡•§</p>
                    </div>
                </div>
            `;

            document.getElementById('invoice-content').innerHTML = invoiceHtml;
            document.getElementById('invoice-modal').classList.add('show');
        }

        function closeInvoice() {
            document.getElementById('invoice-modal').classList.remove('show');
        }

        function printInvoice() {
            const invoiceContent = document.querySelector('.invoice-print').outerHTML;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ - Shaon BD Shop</title>
                    <meta charset="UTF-8">
                    <style>
                        @page {
                            size: A4;
                            margin: 15mm;
                        }
                        body {
                            margin: 0;
                            padding: 0;
                            font-family: 'Noto Sans Bengali', Arial, sans-serif;
                        }
                        .invoice-print {
                            max-width: 100%;
                        }
                        @media print {
                            body { -webkit-print-color-adjust: exact; }
                        }
                    </style>
                </head>
                <body>
                    ${invoiceContent}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function shareInvoice() {
            const invoiceContent = document.querySelector('.invoice-print').outerHTML;
            const shareWindow = window.open('', '_blank', 'width=600,height=800');
            shareWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ - Shaon BD Shop</title>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <style>
                        body {
                            margin: 0;
                            padding: 10px;
                            font-family: 'Noto Sans Bengali', Arial, sans-serif;
                            background: #f5f5f5;
                        }
                        .invoice-container {
                            max-width: 400px;
                            margin: 0 auto;
                            background: white;
                            padding: 15px;
                            border-radius: 8px;
                            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                        }
                        .invoice-print {
                            font-size: 12px;
                            line-height: 1.3;
                        }
                        .invoice-print h1 {
                            font-size: 18px;
                        }
                        .invoice-print h3 {
                            font-size: 14px;
                        }
                        .invoice-print table {
                            font-size: 11px;
                        }
                        .invoice-print th,
                        .invoice-print td {
                            padding: 6px !important;
                        }
                        @media print {
                            body { 
                                background: white;
                                -webkit-print-color-adjust: exact; 
                            }
                            .invoice-container {
                                box-shadow: none;
                                max-width: none;
                                margin: 0;
                                padding: 0;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="invoice-container">
                        ${invoiceContent}
                    </div>
                </body>
                </html>
            `);
            shareWindow.document.close();
            showToast('‡¶á‡¶®‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶â‡¶á‡¶®‡ßç‡¶°‡ßã‡¶§‡ßá ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        }

        // Make functions global
        window.showAdminLogin = showAdminLogin;
        window.closeAdminLogin = closeAdminLogin;
        window.logoutAdmin = logoutAdmin;
        window.filterProducts = filterProducts;
        window.orderProduct = orderProduct;
        window.closeOrderModal = closeOrderModal;
        window.switchAdminTab = switchAdminTab;
        window.deleteProduct = deleteProduct;
        window.editProduct = editProduct;
        window.closeEditProduct = closeEditProduct;
        window.toggleEditSizeSection = toggleEditSizeSection;
        window.generateInvoice = generateInvoice;
        window.closeInvoice = closeInvoice;
        window.printInvoice = printInvoice;
        window.shareInvoice = shareInvoice;
        window.updateOrderStatus = updateOrderStatus;
        window.deleteOrder = deleteOrder;
        window.addToCart = addToCart;
        window.showCart = showCart;
        window.closeCart = closeCart;
        window.updateCartQuantity = updateCartQuantity;
        window.removeFromCart = removeFromCart;
        window.clearCart = clearCart;
        window.proceedToCheckout = proceedToCheckout;
        window.updateDeliveryCharge = updateDeliveryCharge;
        window.togglePaymentSection = togglePaymentSection;
        window.selectSize = selectSize;
        window.toggleSizeSection = toggleSizeSection;
        window.addAnotherProduct = addAnotherProduct;
        window.loadOrders = loadOrders;
        window.changeSlide = changeSlide;
        window.goToSlide = goToSlide;

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for Firebase to load and check if it's available
            const checkFirebase = () => {
                if (window.db && window.firestore) {
                    initializeApp();
                } else {
                    setTimeout(checkFirebase, 500);
                }
            };
            checkFirebase();
        });
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99e4121b8338bb2f',t:'MTc2MzA5Nzc0My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

